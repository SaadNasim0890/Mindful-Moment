<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>System Architecture</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: #f0f4f8;
        }

        .mermaid {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body>
    <div class="mermaid">
        graph TD
        User[User] -->|Interacts via Browser| Frontend[Frontend HTML/CSS/JS]

        subgraph "Client Side"
        Frontend
        end

        Frontend -->|HTTP POST /analyze| API[FastAPI Server]
        Frontend -->|HTTP GET /history| API

        subgraph "Backend System (Python)"
        API -->|Orchestrates| EmotionAgent[Emotion Agent]
        API -->|Orchestrates| PlannerAgent[Planner Agent]
        API -->|Orchestrates| TrackingAgent[Tracking Agent]

        EmotionAgent -->|Classifies Emotion| OllamaService[Custom Ollama Service]
        PlannerAgent -->|Generates Action| OllamaService

        PlannerAgent -->|Retrieves Context| RAGService[RAG Service]
        PlannerAgent -->|Gets Weather| WeatherService[Weather Service]

        TrackingAgent -->|Logs Interaction| FAISS[FAISS Vector Store]
        RAGService -->|Queries| FAISS
        end

        subgraph "AI & Data Layer"
        OllamaService -->|Inference| Llama3[Llama 3.2 Model]
        FAISS -->|Persists| Disk[Local Storage JSON/Index]
        end
    </div>
</body>

</html>